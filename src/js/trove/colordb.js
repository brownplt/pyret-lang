define(["./image-lib"], function(imageLib) {
  return function(r, n) {
    var image = imageLib(r, n);
    
    // Color database
    var ColorDb = function() {
        this.colors = {};
    };


    ColorDb.prototype.put = function(name, color) {
        this.colors[name] = color;
    };

    ColorDb.prototype.get = function(name) {
        return this.colors[name.toString().toUpperCase()];
    };


    // FIXME: update toString to handle the primitive field values.

    var colorDb = new ColorDb();
    colorDb.put("ORANGE", makeColor(255, 165, 0));
    colorDb.put("RED", makeColor(255, 0, 0));
    colorDb.put("ORANGERED", makeColor(255, 69, 0));
    colorDb.put("TOMATO", makeColor(255, 99, 71));
    colorDb.put("DARKRED", makeColor(139, 0, 0));
    colorDb.put("RED", makeColor(255, 0, 0));
    colorDb.put("FIREBRICK", makeColor(178, 34, 34));
    colorDb.put("CRIMSON", makeColor(220, 20, 60));
    colorDb.put("DEEPPINK", makeColor(255, 20, 147));
    colorDb.put("MAROON", makeColor(176, 48, 96));
    colorDb.put("INDIAN RED", makeColor(205, 92, 92));
    colorDb.put("INDIANRED", makeColor(205, 92, 92));
    colorDb.put("MEDIUM VIOLET RED", makeColor(199, 21, 133));
    colorDb.put("MEDIUMVIOLETRED", makeColor(199, 21, 133));
    colorDb.put("VIOLET RED", makeColor(208, 32, 144));
    colorDb.put("VIOLETRED", makeColor(208, 32, 144));
    colorDb.put("LIGHTCORAL", makeColor(240, 128, 128));
    colorDb.put("HOTPINK", makeColor(255, 105, 180));
    colorDb.put("PALEVIOLETRED", makeColor(219, 112, 147));
    colorDb.put("LIGHTPINK", makeColor(255, 182, 193));
    colorDb.put("ROSYBROWN", makeColor(188, 143, 143));
    colorDb.put("PINK", makeColor(255, 192, 203));
    colorDb.put("ORCHID", makeColor(218, 112, 214));
    colorDb.put("LAVENDERBLUSH", makeColor(255, 240, 245));
    colorDb.put("SNOW", makeColor(255, 250, 250));
    colorDb.put("CHOCOLATE", makeColor(210, 105, 30));
    colorDb.put("SADDLEBROWN", makeColor(139, 69, 19));
    colorDb.put("BROWN", makeColor(132, 60, 36));
    colorDb.put("DARKORANGE", makeColor(255, 140, 0));
    colorDb.put("CORAL", makeColor(255, 127, 80));
    colorDb.put("SIENNA", makeColor(160, 82, 45));
    colorDb.put("ORANGE", makeColor(255, 165, 0));
    colorDb.put("SALMON", makeColor(250, 128, 114));
    colorDb.put("PERU", makeColor(205, 133, 63));
    colorDb.put("DARKGOLDENROD", makeColor(184, 134, 11));
    colorDb.put("GOLDENROD", makeColor(218, 165, 32));
    colorDb.put("SANDYBROWN", makeColor(244, 164, 96));
    colorDb.put("LIGHTSALMON", makeColor(255, 160, 122));
    colorDb.put("DARKSALMON", makeColor(233, 150, 122));
    colorDb.put("GOLD", makeColor(255, 215, 0));
    colorDb.put("YELLOW", makeColor(255, 255, 0));
    colorDb.put("OLIVE", makeColor(128, 128, 0));
    colorDb.put("BURLYWOOD", makeColor(222, 184, 135));
    colorDb.put("TAN", makeColor(210, 180, 140));
    colorDb.put("NAVAJOWHITE", makeColor(255, 222, 173));
    colorDb.put("PEACHPUFF", makeColor(255, 218, 185));
    colorDb.put("KHAKI", makeColor(240, 230, 140));
    colorDb.put("DARKKHAKI", makeColor(189, 183, 107));
    colorDb.put("MOCCASIN", makeColor(255, 228, 181));
    colorDb.put("WHEAT", makeColor(245, 222, 179));
    colorDb.put("BISQUE", makeColor(255, 228, 196));
    colorDb.put("PALEGOLDENROD", makeColor(238, 232, 170));
    colorDb.put("BLANCHEDALMOND", makeColor(255, 235, 205));
    colorDb.put("MEDIUM GOLDENROD", makeColor(234, 234, 173));
    colorDb.put("MEDIUMGOLDENROD", makeColor(234, 234, 173));
    colorDb.put("PAPAYAWHIP", makeColor(255, 239, 213));
    colorDb.put("MISTYROSE", makeColor(255, 228, 225));
    colorDb.put("LEMONCHIFFON", makeColor(255, 250, 205));
    colorDb.put("ANTIQUEWHITE", makeColor(250, 235, 215));
    colorDb.put("CORNSILK", makeColor(255, 248, 220));
    colorDb.put("LIGHTGOLDENRODYELLOW", makeColor(250, 250, 210));
    colorDb.put("OLDLACE", makeColor(253, 245, 230));
    colorDb.put("LINEN", makeColor(250, 240, 230));
    colorDb.put("LIGHTYELLOW", makeColor(255, 255, 224));
    colorDb.put("SEASHELL", makeColor(255, 245, 238));
    colorDb.put("BEIGE", makeColor(245, 245, 220));
    colorDb.put("FLORALWHITE", makeColor(255, 250, 240));
    colorDb.put("IVORY", makeColor(255, 255, 240));
    colorDb.put("GREEN", makeColor(0, 255, 0));
    colorDb.put("LAWNGREEN", makeColor(124, 252, 0));
    colorDb.put("CHARTREUSE", makeColor(127, 255, 0));
    colorDb.put("GREEN YELLOW", makeColor(173, 255, 47));
    colorDb.put("GREENYELLOW", makeColor(173, 255, 47));
    colorDb.put("YELLOW GREEN", makeColor(154, 205, 50));
    colorDb.put("YELLOWGREEN", makeColor(154, 205, 50));
    colorDb.put("MEDIUM FOREST GREEN", makeColor(107, 142, 35));
    colorDb.put("OLIVEDRAB", makeColor(107, 142, 35));
    colorDb.put("MEDIUMFORESTGREEN", makeColor(107, 142, 35));
    colorDb.put("DARK OLIVE GREEN", makeColor(85, 107, 47));
    colorDb.put("DARKOLIVEGREEN", makeColor(85, 107, 47));
    colorDb.put("DARKSEAGREEN", makeColor(143, 188, 139));
    colorDb.put("LIME", makeColor(0, 255, 0));
    colorDb.put("DARK GREEN", makeColor(0, 100, 0));
    colorDb.put("DARKGREEN", makeColor(0, 100, 0));
    colorDb.put("LIME GREEN", makeColor(50, 205, 50));
    colorDb.put("LIMEGREEN", makeColor(50, 205, 50));
    colorDb.put("FOREST GREEN", makeColor(34, 139, 34));
    colorDb.put("FORESTGREEN", makeColor(34, 139, 34));
    colorDb.put("SPRING GREEN", makeColor(0, 255, 127));
    colorDb.put("SPRINGGREEN", makeColor(0, 255, 127));
    colorDb.put("MEDIUM SPRING GREEN", makeColor(0, 250, 154));
    colorDb.put("MEDIUMSPRINGGREEN", makeColor(0, 250, 154));
    colorDb.put("SEA GREEN", makeColor(46, 139, 87));
    colorDb.put("SEAGREEN", makeColor(46, 139, 87));
    colorDb.put("MEDIUM SEA GREEN", makeColor(60, 179, 113));
    colorDb.put("MEDIUMSEAGREEN", makeColor(60, 179, 113));
    colorDb.put("AQUAMARINE", makeColor(112, 216, 144));
    colorDb.put("LIGHTGREEN", makeColor(144, 238, 144));
    colorDb.put("PALE GREEN", makeColor(152, 251, 152));
    colorDb.put("PALEGREEN", makeColor(152, 251, 152));
    colorDb.put("MEDIUM AQUAMARINE", makeColor(102, 205, 170));
    colorDb.put("MEDIUMAQUAMARINE", makeColor(102, 205, 170));
    colorDb.put("TURQUOISE", makeColor(64, 224, 208));
    colorDb.put("LIGHTSEAGREEN", makeColor(32, 178, 170));
    colorDb.put("MEDIUM TURQUOISE", makeColor(72, 209, 204));
    colorDb.put("MEDIUMTURQUOISE", makeColor(72, 209, 204));
    colorDb.put("HONEYDEW", makeColor(240, 255, 240));
    colorDb.put("MINTCREAM", makeColor(245, 255, 250));
    colorDb.put("ROYALBLUE", makeColor(65, 105, 225));
    colorDb.put("DODGERBLUE", makeColor(30, 144, 255));
    colorDb.put("DEEPSKYBLUE", makeColor(0, 191, 255));
    colorDb.put("CORNFLOWERBLUE", makeColor(100, 149, 237));
    colorDb.put("STEEL BLUE", makeColor(70, 130, 180));
    colorDb.put("STEELBLUE", makeColor(70, 130, 180));
    colorDb.put("LIGHTSKYBLUE", makeColor(135, 206, 250));
    colorDb.put("DARK TURQUOISE", makeColor(0, 206, 209));
    colorDb.put("DARKTURQUOISE", makeColor(0, 206, 209));
    colorDb.put("CYAN", makeColor(0, 255, 255));
    colorDb.put("AQUA", makeColor(0, 255, 255));
    colorDb.put("DARKCYAN", makeColor(0, 139, 139));
    colorDb.put("TEAL", makeColor(0, 128, 128));
    colorDb.put("SKY BLUE", makeColor(135, 206, 235));
    colorDb.put("SKYBLUE", makeColor(135, 206, 235));
    colorDb.put("CADET BLUE", makeColor(96, 160, 160));
    colorDb.put("CADETBLUE", makeColor(95, 158, 160));
    colorDb.put("DARK SLATE GRAY", makeColor(47, 79, 79));
    colorDb.put("DARKSLATEGRAY", makeColor(47, 79, 79));
    colorDb.put("LIGHTSLATEGRAY", makeColor(119, 136, 153));
    colorDb.put("SLATEGRAY", makeColor(112, 128, 144));
    colorDb.put("LIGHT STEEL BLUE", makeColor(176, 196, 222));
    colorDb.put("LIGHTSTEELBLUE", makeColor(176, 196, 222));
    colorDb.put("LIGHT BLUE", makeColor(173, 216, 230));
    colorDb.put("LIGHTBLUE", makeColor(173, 216, 230));
    colorDb.put("POWDERBLUE", makeColor(176, 224, 230));
    colorDb.put("PALETURQUOISE", makeColor(175, 238, 238));
    colorDb.put("LIGHTCYAN", makeColor(224, 255, 255));
    colorDb.put("ALICEBLUE", makeColor(240, 248, 255));
    colorDb.put("AZURE", makeColor(240, 255, 255));
    colorDb.put("MEDIUM BLUE", makeColor(0, 0, 205));
    colorDb.put("MEDIUMBLUE", makeColor(0, 0, 205));
    colorDb.put("DARKBLUE", makeColor(0, 0, 139));
    colorDb.put("MIDNIGHT BLUE", makeColor(25, 25, 112));
    colorDb.put("MIDNIGHTBLUE", makeColor(25, 25, 112));
    colorDb.put("NAVY", makeColor(36, 36, 140));
    colorDb.put("BLUE", makeColor(0, 0, 255));
    colorDb.put("INDIGO", makeColor(75, 0, 130));
    colorDb.put("BLUE VIOLET", makeColor(138, 43, 226));
    colorDb.put("BLUEVIOLET", makeColor(138, 43, 226));
    colorDb.put("MEDIUM SLATE BLUE", makeColor(123, 104, 238));
    colorDb.put("MEDIUMSLATEBLUE", makeColor(123, 104, 238));
    colorDb.put("SLATE BLUE", makeColor(106, 90, 205));
    colorDb.put("SLATEBLUE", makeColor(106, 90, 205));
    colorDb.put("PURPLE", makeColor(160, 32, 240));
    colorDb.put("DARK SLATE BLUE", makeColor(72, 61, 139));
    colorDb.put("DARKSLATEBLUE", makeColor(72, 61, 139));
    colorDb.put("DARKVIOLET", makeColor(148, 0, 211));
    colorDb.put("DARK ORCHID", makeColor(153, 50, 204));
    colorDb.put("DARKORCHID", makeColor(153, 50, 204));
    colorDb.put("MEDIUMPURPLE", makeColor(147, 112, 219));
    colorDb.put("CORNFLOWER BLUE", makeColor(68, 64, 108));
    colorDb.put("MEDIUM ORCHID", makeColor(186, 85, 211));
    colorDb.put("MEDIUMORCHID", makeColor(186, 85, 211));
    colorDb.put("MAGENTA", makeColor(255, 0, 255));
    colorDb.put("FUCHSIA", makeColor(255, 0, 255));
    colorDb.put("DARKMAGENTA", makeColor(139, 0, 139));
    colorDb.put("VIOLET", makeColor(238, 130, 238));
    colorDb.put("PLUM", makeColor(221, 160, 221));
    colorDb.put("LAVENDER", makeColor(230, 230, 250));
    colorDb.put("THISTLE", makeColor(216, 191, 216));
    colorDb.put("GHOSTWHITE", makeColor(248, 248, 255));
    colorDb.put("WHITE", makeColor(255, 255, 255));
    colorDb.put("WHITESMOKE", makeColor(245, 245, 245));
    colorDb.put("GAINSBORO", makeColor(220, 220, 220));
    colorDb.put("LIGHT GRAY", makeColor(211, 211, 211));
    colorDb.put("LIGHTGRAY", makeColor(211, 211, 211));
    colorDb.put("SILVER", makeColor(192, 192, 192));
    colorDb.put("GRAY", makeColor(190, 190, 190));
    colorDb.put("DARK GRAY", makeColor(169, 169, 169));
    colorDb.put("DARKGRAY", makeColor(169, 169, 169));
    colorDb.put("DIM GRAY", makeColor(105, 105, 105));
    colorDb.put("DIMGRAY", makeColor(105, 105, 105));
    colorDb.put("BLACK", makeColor(0, 0, 0));

    return { colorDb: colorDb };
    
  };
  
});
