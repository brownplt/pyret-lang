const $__C=stopify.compiler;var $__T=stopify;var $__R=$__T.newRTS("lazy");var $S=stopify.init($__R);var fun00;if($__R.mode)fun00=function funExpr0(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun01,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun01,newTarget]}var restoreNextFrame=()=>{return funExpr0.call(this)};var fun01;if($__R.mode){fun01=function funExpr1(){"use strict";var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[simulateTrace,externalInteractionHandler,startTrace,stopTrace,global,app47,draw,tables,getTraceAsTable,interactTrace,app0,getTrace,world,makeReactorRaw,makeReactor,option,interact,setInteract,reactorEvents,getValue,react,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[simulateTrace,externalInteractionHandler,startTrace,stopTrace,global,app47,draw,tables,getTraceAsTable,interactTrace,app0,getTrace,world,makeReactorRaw,makeReactor,option,interact,setInteract,reactorEvents,getValue,react,newTarget]}var restoreNextFrame=()=>{return funExpr1.call(this)};var reactorEvents,tables,option,world,externalInteractionHandler,setInteract,makeReactor,makeReactorRaw,getValue,draw,interact,react,getTrace,getTraceAsTable,startTrace,interactTrace,simulateTrace,stopTrace,app0,global,app47;if($__R.mode){reactorEvents={box:undefined};tables={box:undefined};option={box:undefined};world={box:undefined};externalInteractionHandler={box:undefined};setInteract={box:undefined};makeReactor={box:undefined};makeReactorRaw={box:undefined};getValue={box:undefined};draw={box:undefined};interact={box:undefined};react={box:undefined};getTrace={box:undefined};getTraceAsTable={box:undefined};startTrace={box:undefined};interactTrace={box:undefined};simulateTrace={box:undefined};stopTrace={box:undefined};setInteract.box=function fun018(newInteract){externalInteractionHandler.box=newInteract};makeReactor.box=function fun019(init,fields){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app3,app2,arg00,rawFields,app1,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app3,app2,arg00,rawFields,app1,newTarget]}var restoreNextFrame=()=>{return fun019.call(this,init,fields)};var rawFields,app1,arg00,app2,app3;if($__R.mode){fields={box:fields};rawFields={box:undefined}}try{if($__R.mode){app1=$S.suspend()}else if(target===0)app1=$__R.stack[$__R.stack.length-1].f()}catch(exn0){if(exn0 instanceof $__T.Capture){exn0.stack.push({kind:"rest",f:restoreNextFrame,index:0,this:this});captureLocals(exn0.stack[exn0.stack.length-1])}else{$__R.pushTrace(": in makeReactor")}throw exn0}if($__R.mode){rawFields.box={};arg00=function funExpr2(field){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app5,app4,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app5,app4,newTarget]}var restoreNextFrame=()=>{return funExpr2.call(this,field)};var app4,app5;try{if($__R.mode){app4=$S.suspend()}else if(target===1)app4=$__R.stack[$__R.stack.length-1].f()}catch(exn1){if(exn1 instanceof $__T.Capture){exn1.stack.push({kind:"rest",f:restoreNextFrame,index:1,this:this});captureLocals(exn1.stack[exn1.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn1}try{if($__R.mode){app5=option.box["is-some"](fields.box[field])}else if(target===2)app5=$__R.stack[$__R.stack.length-1].f()}catch(exn2){if(exn2 instanceof $__T.Capture){exn2.stack.push({kind:"rest",f:restoreNextFrame,index:2,this:this});captureLocals(exn2.stack[exn2.stack.length-1])}else{$__R.pushTrace("Line 15: in (anonymous function)")}throw exn2}if($__R.mode&&app5){if($__R.mode)rawFields.box[field]=fields.box[field].value}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app2=$S.g.Object.getOwnPropertyNames(fields.box)}else if(target===3)app2=$__R.stack[$__R.stack.length-1].f()}catch(exn3){if(exn3 instanceof $__T.Capture){exn3.stack.push({kind:"rest",f:restoreNextFrame,index:3,this:this});captureLocals(exn3.stack[exn3.stack.length-1])}else{$__R.pushTrace("Line 14: in makeReactor")}throw exn3}try{if($__R.mode){app3=app2.forEach(arg00)}else if(target===4)app3=$__R.stack[$__R.stack.length-1].f()}catch(exn4){if(exn4 instanceof $__T.Capture){exn4.stack.push({kind:"rest",f:restoreNextFrame,index:4,this:this});captureLocals(exn4.stack[exn4.stack.length-1])}else{$__R.pushTrace("Line 14: in makeReactor")}throw exn4}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init,rawFields.box,false,[]);else;$__R.remainingStack++;if(newTarget)return this};makeReactorRaw.box=function fun021(init,handlers,tracing,trace){var self,fun02,fun03,fun04,fun05,fun06,fun07,fun08,fun09,fun010,fun011,fun012,fun013,fun014,fun015;trace={box:trace};tracing={box:tracing};handlers={box:handlers};init={box:init};self={box:undefined};fun02=function funExpr3(){return init.box};fun03=function funExpr4(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app8,app6,app7,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app8,app6,app7,newTarget]}var restoreNextFrame=()=>{return funExpr4.call(this)};var app6,app7,app8;try{if($__R.mode){app6=$S.suspend()}else if(target===6)app6=$__R.stack[$__R.stack.length-1].f()}catch(exn5){if(exn5 instanceof $__T.Capture){exn5.stack.push({kind:"rest",f:restoreNextFrame,index:6,this:this});captureLocals(exn5.stack[exn5.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn5}try{if($__R.mode){app7=handlers.box.hasOwnProperty("to-draw")}else if(target===7)app7=$__R.stack[$__R.stack.length-1].f()}catch(exn6){if(exn6 instanceof $__T.Capture){exn6.stack.push({kind:"rest",f:restoreNextFrame,index:7,this:this});captureLocals(exn6.stack[exn6.stack.length-1])}else{$__R.pushTrace("Line 28: in (anonymous function)")}throw exn6}if($__R.mode&&!app7||!$__R.mode&&target===8){try{if($__R.mode){app8=new $S.g.Error("Cannot draw() because no to-draw was specified on this reactor.")}else if(target===8)app8=$__R.stack[$__R.stack.length-1].f()}catch(exn7){if(exn7 instanceof $__T.Capture){exn7.stack.push({kind:"rest",f:restoreNextFrame,index:8,this:this});captureLocals(exn7.stack[exn7.stack.length-1])}else{$__R.pushTrace("Line 29: in (anonymous function)")}throw exn7}if($__R.mode)$__R.pushTrace("Line 29: in (anonymous function)");throw app8}if($__R.mode)$__R.remainingStack++;if($__R.mode)return handlers.box["to-draw"](init.box);else;$__R.remainingStack++;if(newTarget)return this};fun04=function funExpr5(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app11,app9,app10,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app11,app9,app10,newTarget]}var restoreNextFrame=()=>{return funExpr5.call(this)};var app9,app10,app11;try{if($__R.mode){app9=$S.suspend()}else if(target===10)app9=$__R.stack[$__R.stack.length-1].f()}catch(exn8){if(exn8 instanceof $__T.Capture){exn8.stack.push({kind:"rest",f:restoreNextFrame,index:10,this:this});captureLocals(exn8.stack[exn8.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn8}try{if($__R.mode){app10=self.box["start-trace"]()}else if(target===11)app10=$__R.stack[$__R.stack.length-1].f()}catch(exn9){if(exn9 instanceof $__T.Capture){exn9.stack.push({kind:"rest",f:restoreNextFrame,index:11,this:this});captureLocals(exn9.stack[exn9.stack.length-1])}else{$__R.pushTrace("Line 34: in (anonymous function)")}throw exn9}try{if($__R.mode){app11=app10.interact()}else if(target===12)app11=$__R.stack[$__R.stack.length-1].f()}catch(exn10){if(exn10 instanceof $__T.Capture){exn10.stack.push({kind:"rest",f:restoreNextFrame,index:12,this:this});captureLocals(exn10.stack[exn10.stack.length-1])}else{$__R.pushTrace("Line 34: in (anonymous function)")}throw exn10}if($__R.mode)$__R.remainingStack++;if($__R.mode)return app11["get-trace-as-table"]();else;$__R.remainingStack++;if(newTarget)return this};fun05=function funExpr6(limit){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app15,app14,app12,r,i,app13,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app15,app14,app12,r,i,app13,newTarget]}var restoreNextFrame=()=>{return funExpr6.call(this,limit)};var app12,r,i,app13,app14,app15;try{if($__R.mode){app12=$S.suspend()}else if(target===14)app12=$__R.stack[$__R.stack.length-1].f()}catch(exn11){if(exn11 instanceof $__T.Capture){exn11.stack.push({kind:"rest",f:restoreNextFrame,index:14,this:this});captureLocals(exn11.stack[exn11.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn11}try{if($__R.mode){r=self.box["start-trace"]()}else if(target===15)r=$__R.stack[$__R.stack.length-1].f()}catch(exn12){if(exn12 instanceof $__T.Capture){exn12.stack.push({kind:"rest",f:restoreNextFrame,index:15,this:this});captureLocals(exn12.stack[exn12.stack.length-1])}else{$__R.pushTrace("Line 37: in (anonymous function)")}throw exn12}if($__R.mode)i=limit;if($__R.mode||!$__R.mode&&(target===18||target===17||target===16))loop_break0:while($__R.mode&&i>0||!$__R.mode&&(target===18||target===17||target===16)){if($__R.mode||!$__R.mode&&(target===18||target===17||target===16))loop_continue0:{try{if($__R.mode){app13=$S.suspend()}else if(target===16)app13=$__R.stack[$__R.stack.length-1].f()}catch(exn13){if(exn13 instanceof $__T.Capture){exn13.stack.push({kind:"rest",f:restoreNextFrame,index:16,this:this});captureLocals(exn13.stack[exn13.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn13}try{if($__R.mode){app14=r["is-stopped"]()}else if(target===17)app14=$__R.stack[$__R.stack.length-1].f()}catch(exn14){if(exn14 instanceof $__T.Capture){exn14.stack.push({kind:"rest",f:restoreNextFrame,index:17,this:this});captureLocals(exn14.stack[exn14.stack.length-1])}else{$__R.pushTrace("Line 39: in (anonymous function)")}throw exn14}if($__R.mode&&app14){break loop_break0}try{if($__R.mode){app15=r.react(reactorEvents.box["time-tick"])}else if(target===18)app15=$__R.stack[$__R.stack.length-1].f()}catch(exn15){if(exn15 instanceof $__T.Capture){exn15.stack.push({kind:"rest",f:restoreNextFrame,index:18,this:this});captureLocals(exn15.stack[exn15.stack.length-1])}else{$__R.pushTrace("Line 42: in (anonymous function)")}throw exn15}if($__R.mode)r=app15}if($__R.mode)i-=1}if($__R.mode)$__R.remainingStack++;if($__R.mode)return r["get-trace-as-table"]();else;$__R.remainingStack++;if(newTarget)return this};fun06=function funExpr7(insertNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app21,newVal,app16,app17,tracer,thisInteractTrace,fun016,arg01,arg02,arg03,arg04,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app21,newVal,app16,app17,tracer,thisInteractTrace,fun016,arg01,arg02,arg03,arg04,newTarget]}var restoreNextFrame=()=>{return funExpr7.call(this,insertNode)};var thisInteractTrace,app16,app17,tracer,fun016,newVal,app21,arg01,arg02,arg03,arg04;if($__R.mode)thisInteractTrace={box:undefined};try{if($__R.mode){app16=$S.suspend()}else if(target===20)app16=$__R.stack[$__R.stack.length-1].f()}catch(exn16){if(exn16 instanceof $__T.Capture){exn16.stack.push({kind:"rest",f:restoreNextFrame,index:20,this:this});captureLocals(exn16.stack[exn16.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn16}if($__R.mode&&externalInteractionHandler.box===null||!$__R.mode&&target===21){try{if($__R.mode){app17=new $S.g.Error("No interaction set up for this context (please report a bug if you are using code.pyret.org and see this message)")}else if(target===21)app17=$__R.stack[$__R.stack.length-1].f()}catch(exn17){if(exn17 instanceof $__T.Capture){exn17.stack.push({kind:"rest",f:restoreNextFrame,index:21,this:this});captureLocals(exn17.stack[exn17.stack.length-1])}else{$__R.pushTrace("Line 48: in (anonymous function)")}throw exn17}if($__R.mode)$__R.pushTrace("Line 48: in (anonymous function)");throw app17}if($__R.mode){thisInteractTrace.box=[];tracer=null}if($__R.mode&&tracing.box){if($__R.mode){fun016=function funExpr8(newVal,oldVal,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app20,app19,app18,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app20,app19,app18,newTarget]}var restoreNextFrame=()=>{return funExpr8.call(this,newVal,oldVal,k)};var app18,app19,app20;try{if($__R.mode){app18=$S.suspend()}else if(target===22)app18=$__R.stack[$__R.stack.length-1].f()}catch(exn18){if(exn18 instanceof $__T.Capture){exn18.stack.push({kind:"rest",f:restoreNextFrame,index:22,this:this});captureLocals(exn18.stack[exn18.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn18}try{if($__R.mode){app19=thisInteractTrace.box.push(newVal)}else if(target===23)app19=$__R.stack[$__R.stack.length-1].f()}catch(exn19){if(exn19 instanceof $__T.Capture){exn19.stack.push({kind:"rest",f:restoreNextFrame,index:23,this:this});captureLocals(exn19.stack[exn19.stack.length-1])}else{$__R.pushTrace("Line 54: in (anonymous function)")}throw exn19}try{if($__R.mode){app20=k()}else if(target===24)app20=$__R.stack[$__R.stack.length-1].f()}catch(exn20){if(exn20 instanceof $__T.Capture){exn20.stack.push({kind:"rest",f:restoreNextFrame,index:24,this:this});captureLocals(exn20.stack[exn20.stack.length-1])}else{$__R.pushTrace("Line 55: in (anonymous function)")}throw exn20}$__R.remainingStack++;if(newTarget)return this};tracer=fun016}}try{if($__R.mode){newVal=externalInteractionHandler.box(init.box,handlers.box,tracer,insertNode)}else if(target===25)newVal=$__R.stack[$__R.stack.length-1].f()}catch(exn21){if(exn21 instanceof $__T.Capture){exn21.stack.push({kind:"rest",f:restoreNextFrame,index:25,this:this});captureLocals(exn21.stack[exn21.stack.length-1])}else{$__R.pushTrace("Line 58: in (anonymous function)")}throw exn21}try{if($__R.mode){app21=thisInteractTrace.box.shift()}else if(target===26)app21=$__R.stack[$__R.stack.length-1].f()}catch(exn22){if(exn22 instanceof $__T.Capture){exn22.stack.push({kind:"rest",f:restoreNextFrame,index:26,this:this});captureLocals(exn22.stack[exn22.stack.length-1])}else{$__R.pushTrace("Line 60: in (anonymous function)")}throw exn22}if($__R.mode){arg01=newVal;arg02=handlers.box;arg03=tracing.box}try{if($__R.mode){arg04=trace.box.concat(thisInteractTrace.box)}else if(target===27)arg04=$__R.stack[$__R.stack.length-1].f()}catch(exn23){if(exn23 instanceof $__T.Capture){exn23.stack.push({kind:"rest",f:restoreNextFrame,index:27,this:this});captureLocals(exn23.stack[exn23.stack.length-1])}else{$__R.pushTrace("Line 61: in (anonymous function)")}throw exn23}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(arg01,arg02,arg03,arg04);else;$__R.remainingStack++;if(newTarget)return this};fun07=function funExpr9(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app22,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app22,newTarget]}var restoreNextFrame=()=>{return funExpr9.call(this)};var app22;try{if($__R.mode){app22=$S.suspend()}else if(target===29)app22=$__R.stack[$__R.stack.length-1].f()}catch(exn24){if(exn24 instanceof $__T.Capture){exn24.stack.push({kind:"rest",f:restoreNextFrame,index:29,this:this});captureLocals(exn24.stack[exn24.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn24}if($__R.mode)$__R.remainingStack++;if($__R.mode)return self.box.$interact();else;$__R.remainingStack++;if(newTarget)return this};fun08=function funExpr10(insertNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app24,e00,app23,oldInteract,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app24,e00,app23,oldInteract,newTarget]}var restoreNextFrame=()=>{return funExpr10.call(this,insertNode)};var app23,oldInteract,e00,app24;try{if($__R.mode){app23=$S.suspend()}else if(target===31)app23=$__R.stack[$__R.stack.length-1].f()}catch(exn25){if(exn25 instanceof $__T.Capture){exn25.stack.push({kind:"rest",f:restoreNextFrame,index:31,this:this});captureLocals(exn25.stack[exn25.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn25}if($__R.mode){oldInteract=externalInteractionHandler.box;setInteract.box(world.box.$bigBangFromDictNoPauseResume)}try{if(!$__R.mode&&target===34)throw e00;try{if($__R.mode){app24=self.box.$interact(insertNode)}else if(target===33)app24=$__R.stack[$__R.stack.length-1].f()}catch(exn26){if(exn26 instanceof $__T.Capture){exn26.stack.push({kind:"rest",f:restoreNextFrame,index:33,this:this});captureLocals(exn26.stack[exn26.stack.length-1])}else{$__R.pushTrace("Line 70: in (anonymous function)")}throw exn26}{let retval0=app24;$__R.remainingStack++;return newTarget&&!(retval0 instanceof Object)?this:retval0}}catch(e){if(e instanceof $__T.Capture||e instanceof $__T.Restore||e instanceof $__T.EndTurn)throw e;$__R.clearTrace();if($__R.mode){e00=e;setInteract.box(oldInteract);$__R.pushTrace("Line 74: in (anonymous function)")}throw e}$__R.remainingStack++;if(newTarget)return this};fun09=function funExpr11(){if($__R.mode)return world.box.$shutdown({cleanShutdown:true});else;};fun010=function funExpr12(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app25,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app25,newTarget]}var restoreNextFrame=()=>{return funExpr12.call(this)};var app25;try{if($__R.mode){app25=$S.suspend()}else if(target===36)app25=$__R.stack[$__R.stack.length-1].f()}catch(exn27){if(exn27 instanceof $__T.Capture){exn27.stack.push({kind:"rest",f:restoreNextFrame,index:36,this:this});captureLocals(exn27.stack[exn27.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn27}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init.box,handlers.box,true,[init.box]);else;$__R.remainingStack++;if(newTarget)return this};fun011=function funExpr13(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app26,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app26,newTarget]}var restoreNextFrame=()=>{return funExpr13.call(this)};var app26;try{if($__R.mode){app26=$S.suspend()}else if(target===38)app26=$__R.stack[$__R.stack.length-1].f()}catch(exn28){if(exn28 instanceof $__T.Capture){exn28.stack.push({kind:"rest",f:restoreNextFrame,index:38,this:this});captureLocals(exn28.stack[exn28.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn28}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init.box,handlers.box,false,[]);else;$__R.remainingStack++;if(newTarget)return this};fun012=function funExpr14(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app28,app27,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app28,app27,newTarget]}var restoreNextFrame=()=>{return funExpr14.call(this)};var app27,app28;try{if($__R.mode){app27=$S.suspend()}else if(target===40)app27=$__R.stack[$__R.stack.length-1].f()}catch(exn29){if(exn29 instanceof $__T.Capture){exn29.stack.push({kind:"rest",f:restoreNextFrame,index:40,this:this});captureLocals(exn29.stack[exn29.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn29}if($__R.mode&&tracing.box){{let retval1=trace.box;$__R.remainingStack++;return newTarget&&!(retval1 instanceof Object)?this:retval1}}else if($__R.mode||!$__R.mode&&target===41){try{if($__R.mode){app28=new $S.g.Error("Tried to get trace of a reactor that isn't tracing; try calling start-trace() first")}else if(target===41)app28=$__R.stack[$__R.stack.length-1].f()}catch(exn30){if(exn30 instanceof $__T.Capture){exn30.stack.push({kind:"rest",f:restoreNextFrame,index:41,this:this});captureLocals(exn30.stack[exn30.stack.length-1])}else{$__R.pushTrace("Line 89: in (anonymous function)")}throw exn30}if($__R.mode)$__R.pushTrace("Line 89: in (anonymous function)");throw app28}$__R.remainingStack++;if(newTarget)return this};fun013=function funExpr15(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app30,i,app29,fun017,rows,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app30,i,app29,fun017,rows,newTarget]}var restoreNextFrame=()=>{return funExpr15.call(this)};var i,app29,fun017,rows,app30;if($__R.mode)i={box:undefined};try{if($__R.mode){app29=$S.suspend()}else if(target===42)app29=$__R.stack[$__R.stack.length-1].f()}catch(exn31){if(exn31 instanceof $__T.Capture){exn31.stack.push({kind:"rest",f:restoreNextFrame,index:42,this:this});captureLocals(exn31.stack[exn31.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn31}if($__R.mode&&tracing.box||!$__R.mode&&target===43){if($__R.mode){i.box=0;fun017=function funExpr16(state){var ans;ans=[i.box,state];i.box+=1;return ans}}try{if($__R.mode){rows=trace.box.map(fun017)}else if(target===43)rows=$__R.stack[$__R.stack.length-1].f()}catch(exn32){if(exn32 instanceof $__T.Capture){exn32.stack.push({kind:"rest",f:restoreNextFrame,index:43,this:this});captureLocals(exn32.stack[exn32.stack.length-1])}else{$__R.pushTrace("Line 95: in (anonymous function)")}throw exn32}if($__R.mode)$__R.remainingStack++;if($__R.mode)return tables.box.makeTable(["tick","state"],rows);else;}else if($__R.mode||!$__R.mode&&target===45){try{if($__R.mode){app30=new $S.g.Error("Tried to get trace of a reactor that isn't tracing; try calling start-trace() first")}else if(target===45)app30=$__R.stack[$__R.stack.length-1].f()}catch(exn33){if(exn33 instanceof $__T.Capture){exn33.stack.push({kind:"rest",f:restoreNextFrame,index:45,this:this});captureLocals(exn33.stack[exn33.stack.length-1])}else{$__R.pushTrace("Line 103: in (anonymous function)")}throw exn33}if($__R.mode)$__R.pushTrace("Line 103: in (anonymous function)");throw app30}$__R.remainingStack++;if(newTarget)return this};fun014=function funExpr17(event){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[stop,app35,callOrError,cond0,kind,x,x00,y,app31,key,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[stop,app35,callOrError,cond0,kind,x,x00,y,app31,key,newTarget]}var restoreNextFrame=()=>{return funExpr17.call(this,event)};var callOrError,app31,cond0,x00,app35,stop,key,x,y,kind;if($__R.mode){callOrError={box:undefined};callOrError.box=function fun020(handlerName,args){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app32,app33,newVal,app34,newTrace,funObj,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app32,app33,newVal,app34,newTrace,funObj,newTarget]}var restoreNextFrame=()=>{return fun020.call(this,handlerName,args)};var app32,app33,funObj,newVal,newTrace,newTrace,app34;try{if($__R.mode){app32=$S.suspend()}else if(target===46)app32=$__R.stack[$__R.stack.length-1].f()}catch(exn34){if(exn34 instanceof $__T.Capture){exn34.stack.push({kind:"rest",f:restoreNextFrame,index:46,this:this});captureLocals(exn34.stack[exn34.stack.length-1])}else{$__R.pushTrace(": in callOrError")}throw exn34}try{if($__R.mode){app33=handlers.box.hasOwnProperty(handlerName)}else if(target===47)app33=$__R.stack[$__R.stack.length-1].f()}catch(exn35){if(exn35 instanceof $__T.Capture){exn35.stack.push({kind:"rest",f:restoreNextFrame,index:47,this:this});captureLocals(exn35.stack[exn35.stack.length-1])}else{$__R.pushTrace("Line 108: in callOrError")}throw exn35}if($__R.mode&&app33||!$__R.mode&&(target===49||target===48)){if($__R.mode)funObj=handlers.box[handlerName];try{if($__R.mode){newVal=funObj.apply(funObj,args)}else if(target===48)newVal=$__R.stack[$__R.stack.length-1].f()}catch(exn36){if(exn36 instanceof $__T.Capture){exn36.stack.push({kind:"rest",f:restoreNextFrame,index:48,this:this});captureLocals(exn36.stack[exn36.stack.length-1])}else{$__R.pushTrace("Line 110: in callOrError")}throw exn36}if($__R.mode&&tracing.box||!$__R.mode&&target===49){try{if($__R.mode){newTrace=trace.box.concat([newVal])}else if(target===49)newTrace=$__R.stack[$__R.stack.length-1].f()}catch(exn37){if(exn37 instanceof $__T.Capture){exn37.stack.push({kind:"rest",f:restoreNextFrame,index:49,this:this});captureLocals(exn37.stack[exn37.stack.length-1])}else{$__R.pushTrace("Line 112: in callOrError")}throw exn37}}else if($__R.mode){if($__R.mode)newTrace=trace.box}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(newVal,handlers.box,tracing.box,newTrace);else;}else if($__R.mode||!$__R.mode&&target===51){try{if($__R.mode){app34=new $S.g.Error("No "+handlerName+" handler defined")}else if(target===51)app34=$__R.stack[$__R.stack.length-1].f()}catch(exn38){if(exn38 instanceof $__T.Capture){exn38.stack.push({kind:"rest",f:restoreNextFrame,index:51,this:this});captureLocals(exn38.stack[exn38.stack.length-1])}else{$__R.pushTrace("Line 120: in callOrError")}throw exn38}if($__R.mode)$__R.pushTrace("Line 120: in callOrError");throw app34}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app31=$S.suspend()}else if(target===52)app31=$__R.stack[$__R.stack.length-1].f()}catch(exn39){if(exn39 instanceof $__T.Capture){exn39.stack.push({kind:"rest",f:restoreNextFrame,index:52,this:this});captureLocals(exn39.stack[exn39.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn39}if($__R.mode)x00=handlers.box["stop-when"];if($__R.mode&&x00||!$__R.mode&&target===53){try{if($__R.mode){app35=handlers.box["stop-when"](init.box)}else if(target===53)app35=$__R.stack[$__R.stack.length-1].f()}catch(exn40){if(exn40 instanceof $__T.Capture){exn40.stack.push({kind:"rest",f:restoreNextFrame,index:53,this:this});captureLocals(exn40.stack[exn40.stack.length-1])}else{$__R.pushTrace("Line 123: in (anonymous function)")}throw exn40}if($__R.mode)cond0=app35}else if($__R.mode){if($__R.mode)cond0=false}if($__R.mode)stop=cond0;if($__R.mode&&stop){{let retval2=self.box;$__R.remainingStack++;return newTarget&&!(retval2 instanceof Object)?this:retval2}}else if($__R.mode){if($__R.mode&&event["is-keypress"]){if($__R.mode){key=event.key;$__R.remainingStack++}if($__R.mode)return callOrError.box("on-key",[init.box,key]);else;}else if($__R.mode){if($__R.mode&&event["is-time-tick"]){if($__R.mode)$__R.remainingStack++;if($__R.mode)return callOrError.box("on-tick",[init.box]);else;}else if($__R.mode){if($__R.mode&&event["is-mouse"]){if($__R.mode){x=event.x;y=event.y;kind=event.kind;$__R.remainingStack++}if($__R.mode)return callOrError.box("on-mouse",[init.box,x,y,kind]);else;}}}}$__R.remainingStack++;if(newTarget)return this};fun015=function funExpr18(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app36,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app36,newTarget]}var restoreNextFrame=()=>{return funExpr18.call(this)};var app36;try{if($__R.mode){app36=$S.suspend()}else if(target===57)app36=$__R.stack[$__R.stack.length-1].f()}catch(exn41){if(exn41 instanceof $__T.Capture){exn41.stack.push({kind:"rest",f:restoreNextFrame,index:57,this:this});captureLocals(exn41.stack[exn41.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn41}if($__R.mode&&handlers.box["stop-when"]){if($__R.mode)$__R.remainingStack++;if($__R.mode)return handlers.box["stop-when"](init.box);else;}else if($__R.mode){{let retval3=false;$__R.remainingStack++;return newTarget&&!(retval3 instanceof Object)?this:retval3}}$__R.remainingStack++;if(newTarget)return this};self.box={$brand:"reactor","get-value":fun02,draw:fun03,"interact-trace":fun04,"simulate-trace":fun05,$interact:fun06,interact:fun07,$interactNoPauseResume:fun08,$shutdown:fun09,"start-trace":fun010,"stop-trace":fun011,"get-trace":fun012,"get-trace-as-table":fun013,react:fun014,"is-stopped":fun015};return self.box};getValue.box=function fun022(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app37,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app37,newTarget]}var restoreNextFrame=()=>{return fun022.call(this,reactor)};var app37;try{if($__R.mode){app37=$S.suspend()}else if(target===59)app37=$__R.stack[$__R.stack.length-1].f()}catch(exn42){if(exn42 instanceof $__T.Capture){exn42.stack.push({kind:"rest",f:restoreNextFrame,index:59,this:this});captureLocals(exn42.stack[exn42.stack.length-1])}else{$__R.pushTrace(": in getValue")}throw exn42}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["get-value"]();else;$__R.remainingStack++;if(newTarget)return this};draw.box=function fun023(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app38,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app38,newTarget]}var restoreNextFrame=()=>{return fun023.call(this,reactor)};var app38;try{if($__R.mode){app38=$S.suspend()}else if(target===61)app38=$__R.stack[$__R.stack.length-1].f()}catch(exn43){if(exn43 instanceof $__T.Capture){exn43.stack.push({kind:"rest",f:restoreNextFrame,index:61,this:this});captureLocals(exn43.stack[exn43.stack.length-1])}else{$__R.pushTrace(": in draw")}throw exn43}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor.draw();else;$__R.remainingStack++;if(newTarget)return this};interact.box=function fun024(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app39,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app39,newTarget]}var restoreNextFrame=()=>{return fun024.call(this,reactor)};var app39;try{if($__R.mode){app39=$S.suspend()}else if(target===63)app39=$__R.stack[$__R.stack.length-1].f()}catch(exn44){if(exn44 instanceof $__T.Capture){exn44.stack.push({kind:"rest",f:restoreNextFrame,index:63,this:this});captureLocals(exn44.stack[exn44.stack.length-1])}else{$__R.pushTrace(": in interact")}throw exn44}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor.interact();else;$__R.remainingStack++;if(newTarget)return this};react.box=function fun025(reactor,event){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app40,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app40,newTarget]}var restoreNextFrame=()=>{return fun025.call(this,reactor,event)};var app40;try{if($__R.mode){app40=$S.suspend()}else if(target===65)app40=$__R.stack[$__R.stack.length-1].f()}catch(exn45){if(exn45 instanceof $__T.Capture){exn45.stack.push({kind:"rest",f:restoreNextFrame,index:65,this:this});captureLocals(exn45.stack[exn45.stack.length-1])}else{$__R.pushTrace(": in react")}throw exn45}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor.react(event);else;$__R.remainingStack++;if(newTarget)return this};getTrace.box=function fun026(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app41,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app41,newTarget]}var restoreNextFrame=()=>{return fun026.call(this,reactor)};var app41;try{if($__R.mode){app41=$S.suspend()}else if(target===67)app41=$__R.stack[$__R.stack.length-1].f()}catch(exn46){if(exn46 instanceof $__T.Capture){exn46.stack.push({kind:"rest",f:restoreNextFrame,index:67,this:this});captureLocals(exn46.stack[exn46.stack.length-1])}else{$__R.pushTrace(": in getTrace")}throw exn46}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["get-trace"]();else;$__R.remainingStack++;if(newTarget)return this};getTraceAsTable.box=function fun027(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app42,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app42,newTarget]}var restoreNextFrame=()=>{return fun027.call(this,reactor)};var app42;try{if($__R.mode){app42=$S.suspend()}else if(target===69)app42=$__R.stack[$__R.stack.length-1].f()}catch(exn47){if(exn47 instanceof $__T.Capture){exn47.stack.push({kind:"rest",f:restoreNextFrame,index:69,this:this});captureLocals(exn47.stack[exn47.stack.length-1])}else{$__R.pushTrace(": in getTraceAsTable")}throw exn47}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["get-trace-as-table"]();else;$__R.remainingStack++;if(newTarget)return this};startTrace.box=function fun028(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app43,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app43,newTarget]}var restoreNextFrame=()=>{return fun028.call(this,reactor)};var app43;try{if($__R.mode){app43=$S.suspend()}else if(target===71)app43=$__R.stack[$__R.stack.length-1].f()}catch(exn48){if(exn48 instanceof $__T.Capture){exn48.stack.push({kind:"rest",f:restoreNextFrame,index:71,this:this});captureLocals(exn48.stack[exn48.stack.length-1])}else{$__R.pushTrace(": in startTrace")}throw exn48}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["start-trace"]();else;$__R.remainingStack++;if(newTarget)return this};interactTrace.box=function fun029(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app44,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app44,newTarget]}var restoreNextFrame=()=>{return fun029.call(this,reactor)};var app44;try{if($__R.mode){app44=$S.suspend()}else if(target===73)app44=$__R.stack[$__R.stack.length-1].f()}catch(exn49){if(exn49 instanceof $__T.Capture){exn49.stack.push({kind:"rest",f:restoreNextFrame,index:73,this:this});captureLocals(exn49.stack[exn49.stack.length-1])}else{$__R.pushTrace(": in interactTrace")}throw exn49}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["interact-trace"]();else;$__R.remainingStack++;if(newTarget)return this};simulateTrace.box=function fun030(reactor,limit){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app45,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app45,newTarget]}var restoreNextFrame=()=>{return fun030.call(this,reactor,limit)};var app45;try{if($__R.mode){app45=$S.suspend()}else if(target===75)app45=$__R.stack[$__R.stack.length-1].f()}catch(exn50){if(exn50 instanceof $__T.Capture){exn50.stack.push({kind:"rest",f:restoreNextFrame,index:75,this:this});captureLocals(exn50.stack[exn50.stack.length-1])}else{$__R.pushTrace(": in simulateTrace")}throw exn50}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["simulate-trace"](limit);else;$__R.remainingStack++;if(newTarget)return this};stopTrace.box=function fun031(reactor){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app46,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app46,newTarget]}var restoreNextFrame=()=>{return fun031.call(this,reactor)};var app46;try{if($__R.mode){app46=$S.suspend()}else if(target===77)app46=$__R.stack[$__R.stack.length-1].f()}catch(exn51){if(exn51 instanceof $__T.Capture){exn51.stack.push({kind:"rest",f:restoreNextFrame,index:77,this:this});captureLocals(exn51.stack[exn51.stack.length-1])}else{$__R.pushTrace(": in stopTrace")}throw exn51}if($__R.mode)$__R.remainingStack++;if($__R.mode)return reactor["stop-trace"]();else;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app0=$S.suspend()}else if(target===79)app0=$__R.stack[$__R.stack.length-1].f()}catch(exn52){if(exn52 instanceof $__T.Capture){exn52.stack.push({kind:"rest",f:restoreNextFrame,index:79,this:this});captureLocals(exn52.stack[exn52.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn52}if($__R.mode)$S.g.exports.__esModule=true;try{if($__R.mode){global=$S.g.require.call(void 0,"./global.arr.js")}else if(target===80)global=$__R.stack[$__R.stack.length-1].f()}catch(exn53){if(exn53 instanceof $__T.Capture){exn53.stack.push({kind:"rest",f:restoreNextFrame,index:80,this:this});captureLocals(exn53.stack[exn53.stack.length-1])}else{$__R.pushTrace("Line 3: in (anonymous function)")}throw exn53}try{if($__R.mode){reactorEvents.box=$S.g.require.call(void 0,"./reactor-events.arr.js")}else if(target===81)reactorEvents.box=$__R.stack[$__R.stack.length-1].f()}catch(exn54){if(exn54 instanceof $__T.Capture){exn54.stack.push({kind:"rest",f:restoreNextFrame,index:81,this:this});captureLocals(exn54.stack[exn54.stack.length-1])}else{$__R.pushTrace("Line 4: in (anonymous function)")}throw exn54}try{if($__R.mode){tables.box=$S.g.require.call(void 0,"./tables.arr.js")}else if(target===82)tables.box=$__R.stack[$__R.stack.length-1].f()}catch(exn55){if(exn55 instanceof $__T.Capture){exn55.stack.push({kind:"rest",f:restoreNextFrame,index:82,this:this});captureLocals(exn55.stack[exn55.stack.length-1])}else{$__R.pushTrace("Line 5: in (anonymous function)")}throw exn55}try{if($__R.mode){option.box=$S.g.require.call(void 0,"./option.arr.js")}else if(target===83)option.box=$__R.stack[$__R.stack.length-1].f()}catch(exn56){if(exn56 instanceof $__T.Capture){exn56.stack.push({kind:"rest",f:restoreNextFrame,index:83,this:this});captureLocals(exn56.stack[exn56.stack.length-1])}else{$__R.pushTrace("Line 6: in (anonymous function)")}throw exn56}try{if($__R.mode){world.box=$S.g.require.call(void 0,"./world.js")}else if(target===84)world.box=$__R.stack[$__R.stack.length-1].f()}catch(exn57){if(exn57 instanceof $__T.Capture){exn57.stack.push({kind:"rest",f:restoreNextFrame,index:84,this:this});captureLocals(exn57.stack[exn57.stack.length-1])}else{$__R.pushTrace("Line 7: in (anonymous function)")}throw exn57}if($__R.mode){externalInteractionHandler.box=null;$S.g.module.exports={mouse:reactorEvents.box["mouse"],keypress:reactorEvents.box["keypress"],"time-tick":reactorEvents.box["time-tick"],"make-reactor":makeReactor.box,"get-value":getValue.box,"get-instance":getValue.box,"draw":draw.box,"get-trace":getTrace.box,"get-trace-as-table":getTraceAsTable.box,"start-trace":startTrace.box,"stop-trace":stopTrace.box,"interact-trace":interactTrace.box,"simulate-trace":simulateTrace.box,"react":react.box,"interact":interact.box,"$setInteract":setInteract.box}}try{if($__R.mode){app47=global.$setMakeReactor(makeReactor.box)}else if(target===85)app47=$__R.stack[$__R.stack.length-1].f()}catch(exn58){if(exn58 instanceof $__T.Capture){exn58.stack.push({kind:"rest",f:restoreNextFrame,index:85,this:this});captureLocals(exn58.stack[exn58.stack.length-1])}else{$__R.pushTrace("Line 200: in (anonymous function)")}throw exn58}if($__R.mode)setInteract.box(world.box.$bigBangFromDict);$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return fun01();else;$__R.remainingStack++;if(newTarget)return this};if($__R.mode)fun00;